<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to musicMCT • musicMCT</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to musicMCT">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">musicMCT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/musicMCT.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/visualizing_higher_dimensions.html">Visualizing Higher Dimensions</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/satbq/musicMCT/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to musicMCT</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/satbq/musicMCT/blob/main/vignettes/musicMCT.Rmd" class="external-link"><code>vignettes/musicMCT.Rmd</code></a></small>
      <div class="d-none name"><code>musicMCT.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://satbq.github.io/musicMCT/">musicMCT</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The goal of musicMCT is to provide computational tools for the study
of musical scales. It includes functions that will probably be familiar
to music theorists from pitch-class set theory in the vein of Allen
Forte’s <em>The Structure of Atonal Music</em> (1973). For instance, we
can calculate the <strong>i</strong>nterval-class
<strong>vec</strong>tor of the diatonic scale (Forte’s
<strong>s</strong>et <strong>c</strong>lass 7-35) as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ivec.html">ivec</a></span><span class="op">(</span><span class="fu"><a href="../reference/sc.html">sc</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">35</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2 5 4 3 6 1</span></span></code></pre></div>
<p>The top line of the block above is what you would input to R; the
bottom line is the output of the function. Ignore the <code>[1]</code>,
which just indicates that you’re seeing the beginning of the output. The
ic-vector is 2 5 4 3 6 1 as we’d expect.</p>
<p>The main purpose of the package, however, is not to reproduce
traditional pc-set theory but to let us explore the geometry of musical
scales described in “Modal Color Theory” (Sherrill 2025, <em>Journal of
Music Theory</em> 69/1: 1-49). As that article explains, seven-note
scales live in a 6-dimensional geometry populated by 1,824,229
qualitatively distinct scalar structures. I’m happy to calculate an
<code><a href="../reference/ivec.html">ivec()</a></code> by hand, but we’re going to need computers to
explore such a complicated space!</p>
<p>This vignette will introduce many of the main functions of musicMCT
that serve this purpose, especially as they relate to the concerns of
the <em>Journal of Music Theory</em> article. The problem that we’ll
discuss is not of deep significance, but I hope a toy example will teach
you how to use this software and give you a sense of the kinds of
questions that deeper study might get into.</p>
</div>
<div class="section level2">
<h2 id="how-acoustic-is-the-acoustic-scale">How acoustic is the “acoustic scale”?<a class="anchor" aria-label="anchor" href="#how-acoustic-is-the-acoustic-scale"></a>
</h2>
<div class="section level3">
<h3 id="introducing-the-main-characters">1. Introducing the main characters<a class="anchor" aria-label="anchor" href="#introducing-the-main-characters"></a>
</h3>
<p>A familiar object from the theory of 20th-century music is the scale
(C, D, E, F-sharp, G, A, B-flat). This is the fourth mode of melodic
minor. We can verify that fact by defining the melodic minor scale for R
and then calling <code><a href="../reference/sim.html">sim()</a></code>, the package’s function for finding
the modes of a scale:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">melodic_minor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/sim.html">sim</a></span><span class="op">(</span><span class="va">melodic_minor</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    2    1    2    2    2    2    1</span></span>
<span><span class="co">#&gt; [3,]    3    3    4    4    4    3    3</span></span>
<span><span class="co">#&gt; [4,]    5    5    6    6    5    5    4</span></span>
<span><span class="co">#&gt; [5,]    7    7    8    7    7    6    6</span></span>
<span><span class="co">#&gt; [6,]    9    9    9    9    8    8    8</span></span>
<span><span class="co">#&gt; [7,]   11   10   11   10   10   10   10</span></span></code></pre></div>
<p>Note the top line’s syntax, which defines the melodic minor scale.
We’ll be using it a lot! The arrow <code>&lt;-</code> assigns the value
on the right side to the variable name on the left side. The
<code>c( ... )</code> on the right side of this statement is the
standard way to tell R to treat a bunch of things as a single
collection. (See [c()]. musicMCT also has a couple functions that are
meant to mimic [c()] while letting you enter intervals as
just-intonation frequency ratios instead of pitch-space distances: see
[j()] and [z()].)</p>
<p>Pitch-classes are represented by numbers: C=0, C-sharp = 1, and so
on. For familiar sets in 12edo (12 <strong>e</strong>qual
<strong>d</strong>ivisions of the <strong>o</strong>ctave), these are
all integers. Later we’ll see that it’s easy to work with integers in
any k edo. But the values that define our scales don’t have to be
integers at all: Modal Color Theory works in continuous pitch-class
space. For instance, here’s a common just tuning of the major scale
(Ptolemy’s “intense” or “syntonic” diatonic):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/j.html">j</a></span><span class="op">(</span><span class="va">dia</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0.000000  2.039100  3.863137  4.980450  7.019550  8.843587 10.882687</span></span></code></pre></div>
<p>Getting back to melodic minor, the function <code><a href="../reference/sim.html">sim()</a></code> above
computes the <strong>s</strong>calar <strong>i</strong>nterval
<strong>m</strong>atrix of a set (as defined by <a href="https://doi.org/10.1111/j.1468-2249.2008.00257.x" class="external-link">Tymoczko
2008</a>), which presents to us the modes of a scale as the columns of
the matrix. Our input, the melodic minor scale, is in the first column,
and the scale we want to study can be read from the fourth column of the
SIM:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sim.html">sim</a></span><span class="op">(</span><span class="va">melodic_minor</span><span class="op">)</span><span class="op">[</span>, <span class="fl">4</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1]  0  2  4  6  7  9 10</span></span></code></pre></div>
<p>Just to practice using R, let’s pretend that we’ve forgotten how to
interpret pitch-class integers and that we therefore need to verify that
those numbers do correspond to the notes (C, D, E, F-sharp, G, A,
B-flat). We’ll do that by checking the <strong>v</strong>oice
<strong>l</strong>eading from C major to this scale:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c_major</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">11</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/minimize_vl.html">minimize_vl</a></span><span class="op">(</span><span class="va">c_major</span>, <span class="fu"><a href="../reference/sim.html">sim</a></span><span class="op">(</span><span class="va">melodic_minor</span><span class="op">)</span><span class="op">[</span>, <span class="fl">4</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0  0  0  1  0  0 -1</span></span></code></pre></div>
<p>As <a href="https://www.mtosmt.org/issues/mto.05.11.4/mto.05.11.4.tymoczko.pdf" class="external-link">Tymoczko
2007</a> points out, key signatures are essentially just voice leadings
from the C major scale to another heptachord, and here we’ve found a
voice leading that raises the fourth step (F) a semitone while lowering
the seventh step (B). So the numbers (0, 2, 4, 6, 7, 9, 10) do indeed
correspond to the scale (C, D, E, F-sharp, G, A, B-flat).</p>
<p>Now, this scale is sometimes called the “acoustic” scale because in
some sense it is close to a seven-note chunk of the overtone series. Our
task in this vignette is to use musicMCT to see how real that similarity
is. Let’s agree to call these two scales the “acoustic” and “overtone”
scales, respectively.</p>
<p>The overtone scale is defined by treating the 7th through 13th
harmonics of the overtone series as a scale (noting that the 14th
harmonic is an octave above the 7th). We’ll convert that into semitone
measurements as follows:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">overtones</span> <span class="op">&lt;-</span> <span class="fl">7</span><span class="op">:</span><span class="fl">13</span></span>
<span><span class="va">frequency_ratios</span> <span class="op">&lt;-</span> <span class="va">overtones</span> <span class="op">/</span> <span class="fl">7</span></span>
<span><span class="va">semitone_values</span> <span class="op">&lt;-</span> <span class="fl">12</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">frequency_ratios</span><span class="op">)</span></span>
<span><span class="va">overtone_scale</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim.html">sim</a></span><span class="op">(</span><span class="va">semitone_values</span><span class="op">)</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.000000 2.039100 3.863137 5.513179 7.019550 8.405277 9.688259</span></span></code></pre></div>
<p>Let’s find the voice leading from the overtone scale to the acoustic
scale, since voice leading distance offers an approximate measure of
musical similarity (as <a href="https://doi.org/10.1126/science.1153021" class="external-link">Callender, Quinn, and
Tymoczko 2008</a> argue):</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">acoustic_scale</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim.html">sim</a></span><span class="op">(</span><span class="va">melodic_minor</span><span class="op">)</span><span class="op">[</span>, <span class="fl">4</span><span class="op">]</span></span>
<span><span class="fu"><a href="../reference/minimize_vl.html">minimize_vl</a></span><span class="op">(</span><span class="va">overtone_scale</span>, <span class="va">acoustic_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0.00000000 -0.03910002  0.13686286  0.48682058 -0.01955001  0.59472338</span></span>
<span><span class="co">#&gt; [7]  0.31174094</span></span></code></pre></div>
<p>Intuitions about voice leading distances can be tricky, but this
initially doesn’t seem like a big distance between the two scales. The
average amount that each voice has to move is about 23 cents (a quarter
of a semitone). On the other hand, our voice leading from C major to C
acoustic was also pretty small: the average distance an individual voice
had to move there was about 29 cents (2/7 of a semitone). Thus, by one
measure, the <code>acoustic_scale</code> is about as good of an
approximation of <code>c_major</code> as it is of the
<code>overtone_scale</code>!</p>
<p>We need better tools than mere voice-leading distance to think about
scale similarity. One is the idea of quantization, which we’ll address
in the next section. We’ll see that it doesn’t tell the whole story
either.</p>
</div>
<div class="section level3">
<h3 id="a-few-supporting-characters">2. A few supporting characters<a class="anchor" aria-label="anchor" href="#a-few-supporting-characters"></a>
</h3>
<p>The normal justification for calling the <code>acoustic_scale</code>
“acoustic” is that it’s what you get if you simply round the values of
the <code>overtone_scale</code> to the nearest integer (in 12edo):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">overtone_scale</span>, digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0  2  4  6  7  8 10</span></span></code></pre></div>
<p>Wait a second, that’s not even the acoustic scale! It has two
consecutive semitones (6, 7, 8) and actually represents sc7-33, the
“whole-tone plus one” scale. What’s going on here!?</p>
<p><a href="https://doi.org/10.1080/17459737.2013.818724" class="external-link">Tymoczko
(2013, 130)</a> explains that there’s really no such thing as
<em>the</em> quantization of the <code>overtone_scale</code>. There are
7 different quantizations. The rounding above unfairly privileges C
(<code>0</code>) as a note that’s guaranteed not to move. If we treat
all the degrees of the scale more equally, sometimes a different note
gets to stay fixed. Let’s try it.</p>
<p>If the scale’s tonic starts on a 12edo integer, it won’t change when
we quantize the scale. Transposing the whole scale up 1 semitone by
using <code><a href="../reference/tn.html">tn()</a></code>, we should expect to get essentially the same
quantization, just with 1 added to every value:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">overtone_scale</span>, digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0  2  4  6  7  8 10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="../reference/tn.html">tn</a></span><span class="op">(</span><span class="va">overtone_scale</span>, <span class="fl">1</span><span class="op">)</span>, digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  1  3  5  7  8  9 11</span></span></code></pre></div>
<p>To find the other possible quantizations, we need to explore the
range of transpositions where the scale’s tonic is some value
<code>0 &lt; x &lt; 1</code>. If we transpose the
<code>overtone_scale</code> so that it starts on every cent (i.e.
hundredth of a semitone) in that range, that should be a fine enough
sampling to encounter every quantization:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">amounts_to_transpose</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">99</span><span class="op">)</span><span class="op">/</span><span class="fl">100</span></span>
<span><span class="va">transposed_scales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">amounts_to_transpose</span>, <span class="va">tn</span>, set<span class="op">=</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="va">quantized_scales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">transposed_scales</span>, <span class="fl">2</span>, <span class="va">round</span>, digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">unique_quantizations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">quantized_scales</span>, MARGIN<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">unique_quantizations</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    1    1    1    1</span></span>
<span><span class="co">#&gt; [2,]    2    2    3    3    3    3    3    3</span></span>
<span><span class="co">#&gt; [3,]    4    4    4    4    4    5    5    5</span></span>
<span><span class="co">#&gt; [4,]    6    6    6    6    6    6    6    7</span></span>
<span><span class="co">#&gt; [5,]    7    7    7    8    8    8    8    8</span></span>
<span><span class="co">#&gt; [6,]    8    9    9    9    9    9    9    9</span></span>
<span><span class="co">#&gt; [7,]   10   10   10   10   10   10   11   11</span></span></code></pre></div>
<p>We’re almost there, but some of the scales start on 0 and some on 1.
The eighth column is just <span class="math inline">\({T_1}\)</span> of
the first. So let’s make them all start on zero to double-check that
they’re truly unique:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unique_quantizations_from_0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">unique_quantizations</span>, <span class="fl">2</span>, <span class="va">startzero</span><span class="op">)</span></span>
<span><span class="va">final_quantizations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">unique_quantizations_from_0</span>, MARGIN<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">final_quantizations</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">final_quantizations</span>, <span class="fl">2</span>, <span class="va">fortenum</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">final_quantizations</span><span class="op">)</span></span>
<span><span class="co">#&gt;      7-33 7-34 7-31 7-28 7-29 7-27 7-34</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    2    2    3    3    2    2    2</span></span>
<span><span class="co">#&gt; [3,]    4    4    4    4    3    4    4</span></span>
<span><span class="co">#&gt; [4,]    6    6    6    6    5    5    5</span></span>
<span><span class="co">#&gt; [5,]    7    7    7    8    7    7    7</span></span>
<span><span class="co">#&gt; [6,]    8    9    9    9    8    8    8</span></span>
<span><span class="co">#&gt; [7,]   10   10   10   10    9    9   10</span></span></code></pre></div>
<p>And thus we really do get exactly the seven quantizations that
Tymoczko predicts. Of these seven, is there any reason to think that the
<code>acoustic_scale</code> is a better quantization than the other
possibilities? Tymoczko proposes one perspective: of the 100 scales in
<code>transposed_scales</code>, how <em>many</em> of them quantize to
each of the seven <code>final_quantizations</code>? This is easy to
answer too (though here I’m going to gloss over the details of the code
that gets these numbers):</p>
<pre><code><span><span class="co">#&gt; 7-33 7-34 7-31 7-28 7-29 7-27 7-34 </span></span>
<span><span class="co">#&gt;   11   37    2    2   13   18   17</span></span></code></pre>
<p>That is, the WT-plus-1 scale that we first quantized to accounts for
about 11% of the range of quantizations, whereas there are two distinct
modes of melodic minor (sc7-34) which together account for 54% of the
quantizations. The first mode, which is the <code>acoustic_scale</code>
proper, accounts on its own for 37%–definitely the lion’s share of
them.</p>
<p>This lends credence to conventional view, suggesting that the
<code>acoustic_scale</code> might be a preferable quantization of the
<code>overtone_scale</code> even if it isn’t the <em>only</em>
quantization.</p>
</div>
<div class="section level3">
<h3 id="but-what-about-scale-structure">3. But what about scale structure?<a class="anchor" aria-label="anchor" href="#but-what-about-scale-structure"></a>
</h3>
<p>So far we’ve used some of the tools of musicMCT but we haven’t really
applied the concepts of Modal Color Theory. That’s because we’ve been
treating the scales’ continuous voice-leading space as essentially
undifferentiated, whereas the central argument of MCT is that there are
discrete regions in the geometry that correspond to <em>qualitative</em>
differences in scale structure.</p>
<p>MCT models scale structure by comparing intervals that belong to the
same generic size. For instance, a big part of the character of the
familiar major scale lies in the fact that most of its steps have the
same size, except for <span class="math inline">\(\hat{3}\)</span>-<span class="math inline">\(\hat{4}\)</span> and <span class="math inline">\(\hat{7}\)</span>-<span class="math inline">\(\hat{1}\)</span> which are smaller (but match each
other). MCT breaks this down into individual comparisons: is the step
<span class="math inline">\(\hat{1}\)</span>-<span class="math inline">\(\hat{2}\)</span> bigger or smaller than the step
<span class="math inline">\(\hat{2}\)</span>-<span class="math inline">\(\hat{3}\)</span>? Is the skip <span class="math inline">\(\hat{1}\)</span>-<span class="math inline">\(\hat{3}\)</span> bigger or smaller than the skip
<span class="math inline">\(\hat{3}\)</span>-<span class="math inline">\(\hat{5}\)</span>? And so on.</p>
<p>How long before we have exhausted all the potential comparisons that
we could make? Each comparison corresponds to a hyperplane in the
geometry, and musicMCT offers a complete list of all the hyperplanes in
a matrix called an <code>ineqmat</code> (for “inequality matrix”). The
relevant matrix for four-note scales looks like this:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/makeineqmat.html">getineqmat</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]   -1    2   -1    0    0</span></span>
<span><span class="co">#&gt; [2,]   -1    1    1   -1    0</span></span>
<span><span class="co">#&gt; [3,]    0   -1    2   -1    0</span></span>
<span><span class="co">#&gt; [4,]   -2    1    0    1   -1</span></span>
<span><span class="co">#&gt; [5,]   -1   -1    1    1   -1</span></span>
<span><span class="co">#&gt; [6,]   -1    0   -1    2   -1</span></span>
<span><span class="co">#&gt; [7,]   -2    0    2    0   -1</span></span>
<span><span class="co">#&gt; [8,]    0   -2    0    2   -1</span></span></code></pre></div>
<p>Each row of the matrix represents a different pairwise interval
comparison: for tetrachords, we apparently need to consider 8 different
comparisons to have a complete accounting of a scale structure. Two
scales have the same structure (or belong to the same “color”) if they
answer all 8 comparisons in the same way. musicMCT summarizes this
information in a scale’s <code><a href="../reference/signvector.html">signvector()</a></code>. For instance, let’s
consider set classes 4-6 (prime form 0127) and 4-24 (prime form 0248).
Here are their sign vectors:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="fu"><a href="../reference/sc.html">sc</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0 -1 -1 -1 -1  0 -1  0</span></span>
<span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="fu"><a href="../reference/sc.html">sc</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">24</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0 -1 -1 -1 -1  0 -1  0</span></span></code></pre></div>
<p>These vectors are the same, so MCT considers the tetrachords to have
the same scalar structure. For instance, both start with two identical
steps (0-1-2 and 0-2-4) and then have a larger leap (2-7 and 4-8).</p>
<p>For heptachords, the relevant <code>ineqmat</code> has 42 rows, so
the space of scale structures is considerably more complicated.
Generally you wouldn’t learn a lot from trying to read sign vectors
directly–musicMCT has more human-readable functions that will help you
interpret them–but let’s take a gander at them for the acoustic and
overtone scales:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">acoustic_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1]  0  0  0  1  1  1  0  0  0 -1  1  1  1  0  1  0  0  0 -1  0 -1  1  1  1  1</span></span>
<span><span class="co">#&gt; [26]  1  0  1  1  0  0  0 -1 -1 -1  1  1  0  0  0 -1 -1</span></span>
<span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1 -1 -1 -1 -1 -1 -1  1  1  1  1</span></span>
<span><span class="co">#&gt; [26]  1  1  1 -1 -1 -1 -1 -1 -1 -1  1  1  0 -1 -1 -1 -1</span></span></code></pre></div>
<p>One visually apparent difference between these is that the
<code>acoustic_scale</code> has many more values of <code>0</code> in
its sign vector than the <code>overtone_scale</code> does. In fact, the
latter has only a <em>single</em> <code>0</code>: all the rest of its
values are <code>1</code> or <code>-1</code>. What does this tell us
about the structure of the two scales?</p>
<p>Each entry in a sign vector is a comparison between two intervals in
a scale: both <code>1</code> and <code>-1</code> mean that one interval
is bigger than the other, whereas a <code>0</code> means that the two
intervals are identical. For instance, the first <code>0</code> in the
sign vector for 0127 and 0248 is what encodes the fact that both of them
have a first step that equals their second step.</p>
<p>From this, we can see that the <code>acoustic_scale</code> is
considerably more <em>regular</em> than the <code>overtone_scale</code>,
in the sense that it has many specific interval sizes that repeat inside
it (like the 5 whole tones that dominate its generic steps, and the 4
perfect fifths that are the majority of its generic fifths). This
contrast between the scales isn’t too surprising. The
<code>acoustic_scale</code> is constrained to twelve-tone equal
temperament, so there are only so many intervals that it could possibly
be made up of. By contrast, the <code>overtone_scale</code> is defined
in continuous pitch-class space and has a lot more variety to choose
from. Moreover, given the logarithmic relationship between frequency
ratios and pitch intervals, each successive step in the overtone series
is smaller than the previous, so it makes sense that the
<code>overtone_scale</code> would have a lot of intervallic variety. If
anything, it’s surprising that it repeats <em>any</em> intervals.</p>
<p>We can learn what interval it does repeat by putting together the
information from the sign vector with the <code>ineqmat</code> for
heptachords. We could manually count which entry of the sign vector is a
0, but musicMCT also has a function for that:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/whichsvzeroes.html">whichsvzeroes</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 38</span></span></code></pre></div>
<p>We can now look at the row of the heptachordal <code>ineqmat</code>
to see what interval comparison it defines:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/makeineqmat.html">getineqmat</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="../reference/whichsvzeroes.html">whichsvzeroes</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co">#&gt; [1] -1 -1  0  0  2  0  0 -1</span></span></code></pre></div>
<p>This tells us that the fourth above <span class="math inline">\(\hat{5}\)</span> equals the fourth below <span class="math inline">\(\hat{5}\)</span> in size. (See page 43 of “Modal
Color Theory” for a discussion of how to read the rows of an
<code>ineqmat</code> like this.) And, sure enough, this is true:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/signed_interval_class.html">signed_interval_class</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span><span class="op">-</span><span class="va">overtone_scale</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -4.98045</span></span>
<span><span class="fu"><a href="../reference/signed_interval_class.html">signed_interval_class</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span><span class="op">-</span><span class="va">overtone_scale</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4.98045</span></span></code></pre></div>
<p>If the <code>acoustic_scale</code> is to be an approximation of the
<code>overtone_scale</code>, we might want it to retain this repeated
interval, which it does: the perfect fourth from D to G matches the
perfect fourth from G to C. We could also verify that by checking that
the 38th entry of its sign vector is also 0:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">acoustic_scale</span><span class="op">)</span><span class="op">[</span><span class="fl">38</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>In fact, why don’t we consider all seven of the distinct
quantizations from the previous section?</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_signvectors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">final_quantizations</span>, <span class="fl">2</span>, <span class="va">signvector</span><span class="op">)</span></span>
<span><span class="va">all_signvectors</span><span class="op">[</span><span class="fl">38</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; 7-33 7-34 7-31 7-28 7-29 7-27 7-34 </span></span>
<span><span class="co">#&gt;    0    0   -1    1    0    0    0</span></span></code></pre></div>
<p>Most of them do match the <code>overtone_scale</code> on this point,
except for sc7-31 and sc7-28. Note that these are also the scales that
barely occurred at all as quantizations: each accounts for only about 2%
of all the quantizations according to the table at the end of the
previous section.</p>
<p>We can do better than looking at <em>only</em> position
<code>38</code> in the sign vector. Why don’t we compare the entire sign
vectors at once? There are various ways to do this, but one that’s
simple to calculate is to treat the sign vectors as if they were real
vectors in a 42-dimensional space and compute their distances:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">signvectors_with_overtone_scale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">all_signvectors</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">signvectors_with_overtone_scale</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"o.s."</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span><span class="va">signvectors_with_overtone_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt;          o.s.     7-33     7-34     7-31     7-28     7-29     7-27</span></span>
<span><span class="co">#&gt; 7-33 4.795832                                                      </span></span>
<span><span class="co">#&gt; 7-34 5.000000 4.472136                                             </span></span>
<span><span class="co">#&gt; 7-31 5.385165 5.291503 4.000000                                    </span></span>
<span><span class="co">#&gt; 7-28 5.196152 5.656854 5.477226 4.472136                           </span></span>
<span><span class="co">#&gt; 7-29 5.099020 5.744563 6.403124 5.744563 4.358899                  </span></span>
<span><span class="co">#&gt; 7-27 3.605551 5.099020 5.830952 6.000000 5.291503 4.358899         </span></span>
<span><span class="co">#&gt; 7-34 5.385165 4.472136 6.480741 6.324555 5.830952 5.567764 3.464102</span></span></code></pre></div>
<p>The first column above, labeled “o.s.” for
<code>overtone_scale</code>, represents the distance between the
<code>overtone_scale</code>’s sign vector and the 7 other sign vectors
(as labeled on the rows of the matrix). The other columns represent
distances among the various quantizations.</p>
<p>In a surprise upset, the quantization with the closest sign vector to
the <code>overtone_scale</code> is apparently sc7-27 as represented by
its mode (0, 2, 4, 5, 7, 8, 9). This doesn’t mean that sc7-27 is a
<em>better</em> quantization than the <code>acoustic_scale</code>, just
that it’s one that better reflects the structure of the
<code>overtone_scale</code>. (In particular, it comes closest to
capturing the fact that the <code>overtone_scale</code>’s step sizes get
smaller as you go up the scale. We’ll return to this consideration as we
approach our final approximation at the end of the next section.) The
modes of melodic minor simply have too much regularity–too many zeroes
in their sign vectors–to be very structurally similar to the
<code>overtone_scale</code>.</p>
<p>Another scalar property that we might consider is how many degrees of
freedom a scale has (“Modal Color Theory,” 26-27): how freely can you
vary its individual scale degrees while maintaining the same overall
structure? A minimally constrained heptachord has six degrees of
freedom, and we know that the <code>overtone_scale</code> has one zero
in its sign vector, which ought to make it lose a degree of freedom.
(Our choices about <span class="math inline">\(\hat{1}\)</span> and
<span class="math inline">\(\hat{5}\)</span> ought to determine where
<span class="math inline">\(\hat{2}\)</span> goes.) Let’s compare the
<code>overtone_scale</code>’s freedom to its seven quantizations:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/howfree.html">howfree</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">final_quantizations</span>, <span class="fl">2</span>, <span class="va">howfree</span><span class="op">)</span></span>
<span><span class="co">#&gt; 7-33 7-34 7-31 7-28 7-29 7-27 7-34 </span></span>
<span><span class="co">#&gt;    1    1    2    1    1    1    1</span></span></code></pre></div>
<p>All of these are much less free to vary than the
<code>overtone_scale</code>! All but sc7-31 can only vary along their
line of saturation (“Modal Color Theory,” 20), and sc7-31 is only a
little bit more flexible. This is a consequence of quantizing to
twelve-tone equal temperament, which simply doesn’t have enough distinct
notes to accommodate more flexible heptachords. We can check the degrees
of freedom of all 38 heptachordal set classes in 12edo:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_12edo_heptachords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">38</span>, <span class="va">sc</span>, card<span class="op">=</span><span class="fl">7</span><span class="op">)</span></span>
<span><span class="va">heptachord_freedoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">all_12edo_heptachords</span>, <span class="fl">2</span>, <span class="va">howfree</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">heptachord_freedoms</span><span class="op">)</span></span>
<span><span class="co">#&gt; heptachord_freedoms</span></span>
<span><span class="co">#&gt;  1  2 </span></span>
<span><span class="co">#&gt; 11 27</span></span></code></pre></div>
<p>This table shows that there are 11 set classes with 1 degree of
freedom and 27 set classes with 2 degrees of freedom. None are freer
than that. If we were looking for an approximation of the
<code>overtone_scale</code> with similar structural properties (like 5
degrees of freedom), we unwittingly set ourselves up to fail by
restricting our attention to the twelve-tone chromatic universe.</p>
</div>
<div class="section level3">
<h3 id="looking-for-better-approximations-outside-of-12edo">4. Looking for better approximations outside of 12edo<a class="anchor" aria-label="anchor" href="#looking-for-better-approximations-outside-of-12edo"></a>
</h3>
<p>If we are willing to quantize to other equal divisions of the octave,
we can find much better structural approximations. In particular,
musicMCT has a function that will find a quantized representative of any
scalar color, in the lowest n-note equal division of the octave where
such a quantization exists.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quantized_overtone_color</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/quantize_color.html">quantize_color</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">quantized_overtone_color</span><span class="op">)</span></span>
<span><span class="co">#&gt; $set</span></span>
<span><span class="co">#&gt; [1]  0  6 11 15 18 20 21</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $edo</span></span>
<span><span class="co">#&gt; [1] 30</span></span></code></pre></div>
<p>Note that this function returns a <code>list</code> object. The first
entry of the list defines the scale itself: pitch class integers 0, 6,
11, 15, 18, 20, 21. The second entry tells us interpret those integers
in 30 equal divisions of the octave. If we want to use this as an input
to other functions, usually we only want the pitch-class values
themselves, which we can access as
<code>quantized_overtone_color$set</code>. We’ll need to tell most
functions to interpret that information in 30edo separately, usually by
setting the function’s <code>edo</code> parameter explicitly.</p>
<p>We should check this quantization in two ways. Let’s convert it to
twelve-tone equal temperament to get a sense for how objectively close
it is to the <code>overtone_scale</code>, and let’s verify that it
belongs to the same “color” as the <code>overtone_scale</code> by
verifying that it has the same sign vector as the scale it
approximates:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">overtone_scale</span>, digits<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.00 2.04 3.86 5.51 7.02 8.41 9.69</span></span>
<span><span class="fu"><a href="../reference/convert.html">convert</a></span><span class="op">(</span><span class="va">quantized_overtone_color</span><span class="op">$</span><span class="va">set</span>, <span class="fl">30</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.0 2.4 4.4 6.0 7.2 8.0 8.4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span>, <span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">quantized_overtone_color</span><span class="op">$</span><span class="va">set</span>, edo<span class="op">=</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>So this quantization does indeed have all the same structural
properties as the <code>overtone_scale</code>, but its actual pitches
place it rather farther away than the <code>acoustic_scale</code> was.
This just reinforces the point that there’s no such thing as one single
quantization of a given scale: there are only different quantizations
that satisfy different equivalences we might choose to care about.</p>
<p>In that spirit, there’s yet another way to approximate the
<code>overtone_scale</code> which we haven’t yet considered. This form
of approximation uses the notion of <em>adjacency</em> between colors in
the hyperplane arrangement (“Modal Color Theory,” 31-34). If two scalar
colors are adjacent, one is a simplification of the other that preserves
some aspects of scalar structure while also enforcing a greater degree
of regularity on the scale. For instance, the major triad (0, 4, 7) and
the minor triad (0, 3, 7) are non-equivalent structures that are both
adjacent to the “neutral” triad (0, 3.5, 7). The neutral triad has only
two sizes of step (3.5 and 5) as opposed to the three step sizes for
major and minor (3, 4, and 5). It has a similar structure to them, in
that its last step (5 semitones from fifth to root) is larger than the
others, but it is more regular than major and minor because it makes no
distinction between its root-third and third-fifth intervals. Another
color adjacency which may be familiar to music theorists is the
relationship between the 5-limit just diatonic scale (Ptolemy’s “intense
diatonic”) and the meantone diatonic scale represented by (0, 2, 4, 5,
7, 9, 11) in 12edo. The just and meantone scales are similar in many
ways, but the meantone scale elides distinctions that the just diatonic
makes, such as the difference between major and minor whole tones. (The
meantone diatonic is <em>named</em> for this particular elision of
difference, since it averages out the sizes of the larger and smaller
just whole tones.)</p>
<p>With this in mind, let us ask: what more regular colors is the
<code>overtone_scale</code> adjacent to? We might first compare it to
the 12edo quantizations above. musicMCT lets us do this with the
function <code><a href="../reference/comparesignvecs.html">comparesignvecs()</a></code>, which returns <code>1</code> if
two sign vectors represent adjacent colors, <code>0</code> if two sign
vectors are identical, and <code>-1</code> if the colors are neither the
same nor adjacent.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">overtone_sv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">all_signvectors</span>, <span class="fl">2</span>, <span class="va">comparesignvecs</span>, signvecY<span class="op">=</span><span class="va">overtone_sv</span><span class="op">)</span></span>
<span><span class="co">#&gt; 7-33 7-34 7-31 7-28 7-29 7-27 7-34 </span></span>
<span><span class="co">#&gt;   -1   -1   -1   -1   -1   -1   -1</span></span></code></pre></div>
<p>Alas, none of our 12edo quantizations are adjacent colors to the
<code>overtone_scale</code>! This isn’t surprising given the table of
sign-vector distances near the end of the previous section, but it
reinforces our conclusion that twelve-tone equal temperament isn’t the
temperament you’d choose if your only goal were to approximate these 7
overtones.</p>
<p>How do we find colors that <em>are</em> adjacent to the
<code>overtone_scale</code>? It isn’t as simple as making a minimal
change to the sign vector and creating a scale to match, since most
conceivable sign vectors don’t correspond to scales that can actually
exist. We could try to solve this problem from scratch, but luckily we
don’t have to: part of MCT is a map of all the colors that exist (for
scale sizes up to heptachords) and their adjacency relationships.</p>
<p>This map involves datasets that are too large to distribute with the
musicMCT package. They can be downloaded from the <a href="https://github.com/satbq/modalcolortheory" class="external-link">GitHub repository
modalcolortheory</a>:</p>
<ul>
<li>
<a href="https://github.com/satbq/modalcolortheory/blob/main/representative_scales.rds" class="external-link">representative_scales.rds</a>
(~80 MB) contains a list of all scalar colors for scales of 2-7 notes,
with one concrete scale to represent each color</li>
<li>
<a href="https://github.com/satbq/modalcolortheory/blob/main/representative_signvectors.rds" class="external-link">representative_signvectors.rds</a>
(~10 MB) contains a list of their corresponding sign vectors</li>
<li>
<a href="https://github.com/satbq/modalcolortheory/blob/main/color_adjacencies.rds" class="external-link">color_adjacencies.rds</a>
(~130 MB) contains information about the adjacency relationships between
all these colors (in the form of an adjacency list)</li>
</ul>
<p>If you wish to work with this data, you should save the files in your
working directory, which you can find by calling <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code> in
R. Then import the files into your R session with the following
commands:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">representative_scales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"representative_scales.rds"</span><span class="op">)</span></span>
<span><span class="va">representative_signvectors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"representative_signvectords.rds"</span><span class="op">)</span></span>
<span><span class="va">color_adjacencies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"color_adjacencies.rds"</span><span class="op">)</span></span></code></pre></div>
<p>The file <code>representative_signvectors</code> is particularly
useful because it enables us to assign a well-defined “color number” to
identify each color in a MCT hyperplane arrangement (“Modal Color
Theory,” 28). If you try to look up a scale’s color number without the
<code>representative_signvectors</code> saved, you’ll probably get a
<code>NULL</code> result:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/colornum.html">colornum</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>but if you do have the file, you’ll discover that the
<code>overtone_scale</code> belongs to heptachord color
<code>1824025</code>. From this, we can look up an accounting of all
colors that are adjacent to it. <code>color_adjacencies</code> is
structured as a <em>list</em> in R, whose top level organization
reflects the size of the scales you are studying, so
<code>color_adjacencies[[7]]</code> contains all the information about
the geometry of seven-note scales. To find out which scales are adjacent
to color <code>1824025</code>, we want the list element
<code>color_adjacencies[[7]][[1824025]]</code>. The following code won’t
work on your device unless you have <code>color_adjacencies</code> saved
and loaded into R, but its objective is to find the most regular scale
that the <code>overtone_scale</code> is structurally adjacent to:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">os_adjacent_colors</span> <span class="op">&lt;-</span> <span class="va">color_adjacencies</span><span class="op">[[</span><span class="fl">7</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fu"><a href="../reference/colornum.html">colornum</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">os_adjacent_scales</span> <span class="op">&lt;-</span> <span class="va">representative_scales</span><span class="op">[[</span><span class="fl">7</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>, <span class="va">os_adjacent_colors</span><span class="op">]</span></span>
<span><span class="va">regularity</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">os_adjacent_scales</span>, <span class="fl">2</span>, <span class="va">countsvzeroes</span><span class="op">)</span></span>
<span><span class="va">most_regular_approximation</span> <span class="op">&lt;-</span> <span class="va">os_adjacent_scales</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">regularity</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="../reference/quantize_color.html">quantize_color</a></span><span class="op">(</span><span class="va">most_regular_approximation</span><span class="op">)</span></span></code></pre></div>
<p>If that code runs on your device, it should tell you that the most
regular quantized approximation of the <code>overtone_scale</code> is
the scale (0, 2, 4, 6, 8, 10, 11) in 14-tone equal temperament.
Converted to familiar semitone measurements, this is the scale (0.00,
1.71, 3.43, 5.14, 6.86, 8.57, 9.43). To understand better how this scale
“regularizes” the <code>overtone_scale</code>, let’s consider the two
scales in terms of their ranked step sizes:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/asword.html">asword</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6 5 4 3 2 1 7</span></span>
<span><span class="va">best_simple_approximation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert.html">convert</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span>, <span class="fl">10</span>, <span class="fl">11</span><span class="op">)</span>, <span class="fl">14</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/asword.html">asword</a></span><span class="op">(</span><span class="va">best_simple_approximation</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2 2 2 2 2 1 3</span></span></code></pre></div>
<p>This tells us that the <code>overtone_scale</code> starts with its
6th largest step and then ascends through progressively smaller step
sizes, until its final step from <span class="math inline">\(\hat{7}\)</span> to <span class="math inline">\(\hat{1}\)</span> uses the scale’s largest step
size.</p>
<p>Our <code>best_simple_approximation</code> reduces most of that
variety out of the step sizes: all the steps from its <span class="math inline">\(\hat{1}\)</span> up to <span class="math inline">\(\hat{6}\)</span> are equal. The only intervallic
variety that this approximation retains is that <span class="math inline">\(\hat{6}\)</span> to <span class="math inline">\(\hat{7}\)</span> is still the smallest step in the
scale, and <span class="math inline">\(\hat{7}\)</span> to <span class="math inline">\(\hat{1}\)</span> is still the largest step in the
scale.</p>
<p>By the logic of color adjacency, this is the most regular scale that
simplifies the structure of the <code>overtone_scale</code> without
contradicting any of its structure. By contrast, our original
<code>acoustic_scale</code> does flatly contradict aspects of the
<code>overtone_scale</code>’s structure. For instance, in the
<code>acoustic_scale</code> the step from <span class="math inline">\(\hat{4}\)</span> to <span class="math inline">\(\hat{5}\)</span> is smaller than the step from
<span class="math inline">\(\hat{5}\)</span> to <span class="math inline">\(\hat{6}\)</span>, but in the
<code>overtone_scale</code> <span class="math inline">\(\hat{5}\)</span>
to <span class="math inline">\(\hat{6}\)</span> is smaller (because all
its step sizes get smaller until the last one). We can see that
contradiction by comparing the 10th place of their respective sign
vectors:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">overtone_scale</span><span class="op">)</span><span class="op">[</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">best_simple_approximation</span><span class="op">)</span><span class="op">[</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="fu"><a href="../reference/signvector.html">signvector</a></span><span class="op">(</span><span class="va">acoustic_scale</span><span class="op">)</span><span class="op">[</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] -1</span></span></code></pre></div>
<p>The <code>acoustic_scale</code> is the odd one out here. It’s also,
in terms of voice-leading distance, not clearly closer to the
<code>overtone_scale</code> than our
<code>best_simple_approximation</code> is:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="../reference/minimize_vl.html">minimize_vl</a></span><span class="op">(</span><span class="va">overtone_scale</span>, <span class="va">acoustic_scale</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0.000 -0.039  0.137  0.487 -0.020  0.595  0.312</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="../reference/minimize_vl.html">minimize_vl</a></span><span class="op">(</span><span class="va">overtone_scale</span>, <span class="va">best_simple_approximation</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0.000 -0.325 -0.435 -0.370 -0.162  0.166 -0.260</span></span></code></pre></div>
<p>It’s not easy to eyeball which one of those is a <em>smaller</em>
overall voice leading, partially because the answer to that question
depends on what measure of distance you want to use. (For those who care
about such things, the <code>acoustic_scale</code> is a closer
approximation using the taxicab norm, but our
<code>best_simple_approximation</code> is closer under the Euclidean and
Chebyshev norms.)</p>
</div>
<div class="section level3">
<h3 id="a-tempered-conclusion">5. A tempered conclusion<a class="anchor" aria-label="anchor" href="#a-tempered-conclusion"></a>
</h3>
<p>It would make for a tighter narrative to end with a conclusive
declaration that our <code>best_simple_approximation</code> really is
the best way to quantize the <code>overtone_scale</code>. But reality
isn’t so simple! The best approximation for a scale depends on what
you’re trying to approximate for. This needs to be underscored, because
the attempt to justify certain scale structures as mathematically ideal
is probably the oldest tradition of European music theory. By using math
to talk about scales, Modal Color Theory may look like it contributes to
that tradition, when my goal with the theory is to do just the opposite.
The questions that MCT should be useful for are descriptive ones like
“If you’re using this scale, what can you do with it?” and “If you want
to do X, how can we find some scale Y to facilitate X?” <a href="https://mtosmt.org/issues/mto.24.30.4/mto.24.30.4.shumays.html" class="external-link">Sami
Abu Shumays</a> is right to decry as a fallacy “the idea that the
tunings of musical scales are the result of mathematical laws, rather
than cultural choices that intersect with acoustical realities.” My hope
for MCT is that its math lets us get deeper insight into the nature of
that intersection between cultural choice and acoustical affordance.</p>
<p>In the end, the <code>acoustic_scale</code> actually is a pretty
decent approximation for many purposes, especially if you’re limited to
the familiar 12 pitch-classes of the piano. Hopefully, though, this
vignette shows how we might, when musicking with different priorities,
come to make other choices–and how musicMCT can aid us in that
process.</p>
</div>
</div>
<div class="section level2">
<h2 id="coda-brightness-graphs">Coda: Brightness graphs<a class="anchor" aria-label="anchor" href="#coda-brightness-graphs"></a>
</h2>
<p>Up to this point, we’ve done everything numerically, but “Modal Color
Theory” also has some visualization tools. The one I want to introduce
here is the “brightness graph,” which lets us visualize the
voice-leading relationships between a scale’s modes (and thus to some
degree the internal structure of the scale, as described in “Modal Color
Theory,” 7-11). Using musicMCT we can make quick mock-ups of brightness
graphs with <code><a href="../reference/brightnessgraph.html">brightnessgraph()</a></code>. First let’s take a look at
the <code>acoustic_scale</code>:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/brightnessgraph.html">brightnessgraph</a></span><span class="op">(</span><span class="va">acoustic_scale</span><span class="op">)</span></span></code></pre></div>
<p><img src="musicMCT_files/figure-html/unnamed-chunk-34-1.png" width="480"></p>
<p>The information in this graph is displayed in the same way as Figure
2b of “Modal Color Theory” (p. 8), though you’ll notice a few
differences if you compare the article’s figure to the one in this
vignette. One difference is trivial: the mode at the bottom of our
figure here is mode IV whereas it’s listed as mode VII in the
<em>Journal of Music Theory</em> article. That’s just because the
article treats melodic minor as mode I whereas we’ve asked for the modes
of the <code>acoustic_scale</code>. (If you replace
<code>acoustic_scale</code> with <code>melodic_minor</code> in the
command above, you should get an identical graph with the roman numeral
labels shifted around.) Either way, the precise pitch values for all the
nodes are the same: the bottom mode in both graphs is (0, 1, 3, 4, 6, 8,
10).</p>
<p>The less trivial difference between the article and graph vignettes
is their overall shape. The function <code><a href="../reference/brightnessgraph.html">brightnessgraph()</a></code>
determines the vertical position of graph nodes exactly as “Modal Color
Theory” describes, but it has less guidance for how to make decisions
about left-right placement of nodes. It produces graphs that are usually
legible but which may not clarify the underlying structure: I tend to
use the function as a first draft and then construct my own (ideally
more revealing) graphs by hand. For instance, the Figure 2b of “Modal
Color Theory” represents all <span class="math inline">\(T_2\)</span>
relationships as vertical arrows, resulting in a graph whose overall
shape is a trapezoid. <code><a href="../reference/brightnessgraph.html">brightnessgraph()</a></code> obscures the
predominance of <span class="math inline">\(T_2\)</span> in the
structure of the scale by making the chain of whole steps bow out to the
left at the middle, giving the graph a diamond-like shape.</p>
<p>Let’s now take a look at the brightness graph for the
<code>overtone_scale</code>:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/brightnessgraph.html">brightnessgraph</a></span><span class="op">(</span><span class="va">overtone_scale</span>, numdigits<span class="op">=</span><span class="fl">1</span>, show_sums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="musicMCT_files/figure-html/unnamed-chunk-35-1.png" width="480"></p>
<p>This looks pretty messy! The graph is less connected (i.e. there are
fewer arrows) and the vertical placement of its nodes seems haphazard.
This reflects the fact that the overtone scale has less regularity as
measured by its degrees of freedom or the number of zeroes in its
<code><a href="../reference/signvector.html">signvector()</a></code>. Nevertheless, the graph still has some useful
information. Since the height of a mode corresponds to its sum
brightness, we can see those comparisons at a glance. We can also use
sum brightness relationships as a proxy for the relative height of
individual pitches in the scale: if a pitch serves as the tonic of a
very bright mode, the pitch itself is very low (“dark”) in relation to
the scale. Thus, since mode VII is at the top of our graph here, <span class="math inline">\(\hat{7}\)</span> must be the darkest (relatively
lowest) pitch of the scale. Conversely, since mode III is at the bottom
of the graph, <span class="math inline">\(\hat{3}\)</span> is the
brightest individual note of the scale.</p>
<p>Recall that one of the approximations we tested above was a
quantization of the <code>overtone_scale</code> to a division of the
octave into 30 steps. Let’s see what the brightness graph of that
approximation looks like:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/brightnessgraph.html">brightnessgraph</a></span><span class="op">(</span><span class="va">quantized_overtone_color</span><span class="op">$</span><span class="va">set</span>, edo<span class="op">=</span><span class="fl">30</span>, show_sums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="musicMCT_files/figure-html/unnamed-chunk-36-1.png" width="480"></p>
<p>That’s impressively close to the graph for the actual
<code>overtone_scale</code>! (In truth, we got a little lucky here: many
colors offer enough room for variation that
<code><a href="../reference/brightnessgraph.html">brightnessgraph()</a></code> doesn’t always preserve such visually
obvious similarity.) Aside from a check that
<code><a href="../reference/quantize_color.html">quantize_color()</a></code> works as intended, one other thing to note
from this example is that <code><a href="../reference/brightnessgraph.html">brightnessgraph()</a></code>, like almost
all functions in musicMCT makes it convenient to work in other
“chromatic cardinalities” (i.e. number of unit steps to the octave)
besides 12edo. Just be careful not to make direct comparisons between
absolute values reckoned in different systems: note, for instance, that
the sum brightnesses for our 30edo quantization are all around 90
whereas they were about 36 in the brightness graph of the original
<code>overtone_scale</code>. That’s because we’ve changed our unit of
measurement to be 2.5 times smaller, so values like distances and sums
scale correspondingly.</p>
<p>You might find it instructive to explore the brightness graphs of the
remaining <code>final_quantizations</code> from above, which show
considerable variety from one to the next. This gives a glimpse of the
range of possible structures for seven note scales. Simply change the
number <code>4</code> in the line of code below to any value from
<code>1</code> to <code>7</code> to check the different scales:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/brightnessgraph.html">brightnessgraph</a></span><span class="op">(</span><span class="va">final_quantizations</span><span class="op">[</span>, <span class="fl">4</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="musicMCT_files/figure-html/unnamed-chunk-37-1.png" width="480"></p>
<p>Finally, let’s take a look at the brightness graph for our
<code>best_simple_approximation</code>. I’m going to suppress its
listing of the pitch-classes in each mode, since without manual tweaking
they overlap to the point of illegibility:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/brightnessgraph.html">brightnessgraph</a></span><span class="op">(</span><span class="va">best_simple_approximation</span>, show_pitches<span class="op">=</span><span class="cn">FALSE</span>, show_sums<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="musicMCT_files/figure-html/unnamed-chunk-38-1.png" width="480"></p>
<p>This feels right to me. At a glance, it’s a lot like the graph for
the <code>overtone_scale</code> but without all the mess. All the modes
beneath VII are now neatly lined up on a single row at the bottom.
That’s the visual equivalent of our search for regularity and color
adjacency in the previous section. This is something I like about
brightness graphs: they summarize, in a picture or two, ideas that one
could spend several thousand words developing.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Sherrill.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
