<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Best ways to regularize a scale — simplify_scale • musicMCT</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Best ways to regularize a scale — simplify_scale"><meta name="description" content='Given an input scale, identify which adjacent colors represent good
approximations of it, in a sense consistent with "Modal Color Theory,"
pp. 31-32.'><meta property="og:description" content='Given an input scale, identify which adjacent colors represent good
approximations of it, in a sense consistent with "Modal Color Theory,"
pp. 31-32.'><meta property="og:image" content="https://satbq.github.io/musicMCT/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">musicMCT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/musicMCT.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/visualizing_higher_dimensions.html">Visualizing Higher Dimensions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/satbq/musicMCT/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Best ways to regularize a scale</h1>
      <small class="dont-index">Source: <a href="https://github.com/satbq/musicMCT/blob/main/R/simplify_scale.R" class="external-link"><code>R/simplify_scale.R</code></a></small>
      <div class="d-none name"><code>simplify_scale.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given an input scale, identify which adjacent colors represent good
approximations of it, in a sense consistent with "Modal Color Theory,"
pp. 31-32.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simplify_scale</span><span class="op">(</span></span>
<span>  <span class="va">set</span>,</span>
<span>  start_zero <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ineqmat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scales <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  signvector_list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adjlist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"euclidean"</span>, <span class="st">"taxicab"</span>, <span class="st">"chebyshev"</span>, <span class="st">"hamming"</span><span class="op">)</span>,</span>
<span>  display_digits <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  edo <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  rounder <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">best_simplification</span><span class="op">(</span><span class="va">set</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-set">set<a class="anchor" aria-label="anchor" href="#arg-set"></a></dt>
<dd><p>Numeric vector of pitch-classes in the set</p></dd>


<dt id="arg-start-zero">start_zero<a class="anchor" aria-label="anchor" href="#arg-start-zero"></a></dt>
<dd><p>Boolean: should the result be transposed so that its pitch
initial is zero? Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-ineqmat">ineqmat<a class="anchor" aria-label="anchor" href="#arg-ineqmat"></a></dt>
<dd><p>Specifies which hyperplane arrangement to consider. By default (or by
explicitly entering "mct") it supplies the standard "Modal Color Theory" arrangements
of <code><a href="makeineqmat.html">getineqmat()</a></code>, but can be set to "white," "black", "gray", "roth", "pastel," or "rosy",
giving the <code>ineqmat</code>s of <code><a href="make_white_ineqmat.html">make_white_ineqmat()</a></code>, <code><a href="make_black_ineqmat.html">make_black_ineqmat()</a></code>, <code><a href="make_black_ineqmat.html">make_gray_ineqmat()</a></code>,
<code><a href="make_roth_ineqmat.html">make_roth_ineqmat()</a></code>, <code><a href="make_white_ineqmat.html">make_pastel_ineqmat()</a></code>, and <code><a href="make_roth_ineqmat.html">make_rosy_ineqmat()</a></code>. For other
arrangements, the desired inequality matrix can be entered directly.</p></dd>


<dt id="arg-scales">scales<a class="anchor" aria-label="anchor" href="#arg-scales"></a></dt>
<dd><p>List of scales representing the faces of your hyperplane
arrangement. Defaults to <code>NULL</code> in which case the function looks for
<code>representative_scales</code> in the global environment.</p></dd>


<dt id="arg-signvector-list">signvector_list<a class="anchor" aria-label="anchor" href="#arg-signvector-list"></a></dt>
<dd><p>A list of signvectors to use as the reference by
which <code>colornum</code> assigns a value. Defaults to <code>NULL</code> and will attempt to
use <code>representative_signvectors</code>, which needs to be downloaded and assigned
separately from the package musicMCT.</p></dd>


<dt id="arg-adjlist">adjlist<a class="anchor" aria-label="anchor" href="#arg-adjlist"></a></dt>
<dd><p>Adjacency list structured in the same way as <code>color_adjacencies</code>.
Defaults to <code>NULL</code> in which case the function looks for <code>color_adjacencies</code>
in the global environment.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>What distance metric should be used? Defaults to <code>"euclidean"</code>
(unlike most functions with a method parameter in musicMCT)
but can be <code>"taxicab"</code>, <code>"chebyshev"</code>, or <code>"hamming"</code>.</p></dd>


<dt id="arg-display-digits">display_digits<a class="anchor" aria-label="anchor" href="#arg-display-digits"></a></dt>
<dd><p>Integer: how many digits to display when naming any
non-integral interval sizes. Defaults to 2.</p></dd>


<dt id="arg-edo">edo<a class="anchor" aria-label="anchor" href="#arg-edo"></a></dt>
<dd><p>Number of unit steps in an octave. Defaults to <code>12</code>.</p></dd>


<dt id="arg-rounder">rounder<a class="anchor" aria-label="anchor" href="#arg-rounder"></a></dt>
<dd><p>Numeric (expected integer), defaults to <code>10</code>:
number of decimal places to round to when testing for equality.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments to be passed from <code>best_simplification()</code>
to <code>simplify_scale()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A matrix with <code>n+6</code> rows, where <code>n</code> is the number of notes in the
scale. Each column represents a scale which is a potential simplification
of the input <code>set</code>, together with details about that simplified scale.
The first <code>n</code> entries of the column represent the pitches of the scale
itself:</p><ul><li><p>The <code>n+1</code>th row indicates the color number of the simplification.</p></li>
<li><p>The <code>n+2</code>th row shows how many degrees of freedom the simplification has
(always between <code>0</code> and <code>d-1</code> where <code>d</code> is <code>set</code>'s degree of freedom).</p></li>
<li><p>The <code>n+3</code>th row calculates the voice-leading distance from <code>set</code> to the
simplified scale (according to the chosen <code>method</code>, for which Euclidean
distance is the default because it corresponds to the assumption that
orthogonal projection finds the closest point on a neighboring flat).</p></li>
<li><p>The <code>n+4</code>th row counts how many more hyperplanes the simplified scale
lies on compared to <code>set</code>.</p></li>
<li><p>The <code>n+5</code>th row is a quotient of the previous
two rows (distance divided by number of new regularities).</p></li>
<li><p>The <code>n+6</code>th row calculates a final "score" which is used to order the
columns from best (first) to worst (last) simplifications. This score
is the inverse of the previous row divided by the total number of
hyperplanes in the arrangement. (Without this normalization, scores
for higher cardinalities quickly become much larger than scores for
low cardinalities.)</p></li>
</ul><p>If <code>display_digits</code> is a value other than <code>NULL</code>, the function prints
to console a suitably rounded representation of the data, while
invisibly returning the unrounded information.</p>
<p><code>best_simplification()</code> returns simply a numeric vector with the scale
judged optimal by <code>simplify_scale()</code> (i.e. the first <code>n</code> entries of
its first column, without all the other information).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Suppose that you've gathered data on how a particular instrument is tuned.
Two intervals in its scale differ by about 12 cents: does it make sense
to consider those intervals to be essentially the same, up to some
combination of measurement error and the permissiveness of cognitive
categories? <code>simplify_scale()</code> helps to answer such a question by considering
whether eliding a precisely measured difference results in a significant
simplification of the overall scale structure.</p>
<p>It accomplishes this by starting from two premises:</p><ul><li><p>Any simplification should move to an adjacent color with fewer
degrees of freedom.</p></li>
<li><p>There's a tradeoff between moving farther (i.e. requiring more
measurement fuzziness) and achieving greater regularity.
Therefore it starts by projecting the input scale onto all neighboring
flats with fewer degrees of freedom. Some projections can be rejected
immediately because the closest point on the flat isn't actually an
adjacent color. The non-rejected projections can therefore be ranked by
calculating the "cost" of each additional regularity: for every <code>1</code> or <code>-1</code>
in the sign vector that is converted to a <code>0</code>, how far does one have to
move in voice leading space?</p></li>
</ul><p>To answer this question, <code>simplify_signvector</code> needs access to data about
the hyperplane arrangement in question. For the basic "Modal Color Theory"
arrangements, this is the data in <code>representative_scales.rds</code>,
<code>representative_signvectors.rds</code>, and <code>color_adjacencies.rds</code>. The function
assumes that, if you don't specify other data, you have those three files
loaded into your workspace. It can't function without them.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># exists("representative_scales") &amp;&amp; exists("representative_signvectors") &amp;&amp; exists("color_adjacencies")</span></span></span>
<span class="r-in"><span><span class="co"># For this example to run, you need the necessary data files loaded.</span></span></span>
<span class="r-in"><span><span class="co"># Let's see what happens if we try to simplify the 5-limit just diatonic:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">simplify_scale</span><span class="op">(</span><span class="fu"><a href="j.html">j</a></span><span class="op">(</span><span class="va">dia</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># So the best option is color number 942659, which is the "well-formed"</span></span></span>
<span class="r-in"><span><span class="co"># structure of the familiar diatonic scale. The particular saturation of</span></span></span>
<span class="r-in"><span><span class="co"># that meantone structure is very close to 1/5-comma meantone:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">simplified_jdia</span> <span class="op">&lt;-</span> <span class="fu">best_simplification</span><span class="op">(</span><span class="fu"><a href="j.html">j</a></span><span class="op">(</span><span class="va">dia</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fifth_comma_dia</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim.html">sim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="meantone_fifth.html">meantone_fifth</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">5</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span><span class="fl">12</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>,<span class="fl">5</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vl_dist.html">vl_dist</a></span><span class="op">(</span><span class="va">simplified_jdia</span>, <span class="va">fifth_comma_dia</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Sherrill.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

